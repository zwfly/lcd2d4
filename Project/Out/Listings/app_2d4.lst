C51 COMPILER V9.56.0.0   APP_2D4                                                           08/21/2017 21:12:41 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE APP_2D4
OBJECT MODULE PLACED IN .\Out\Objects\app_2d4.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\App\src\app_2d4.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common\inc
                    -;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\app_2d4.lst) OBJEC
                    -T(.\Out\Objects\app_2d4.obj)

line level    source

   1          /*
   2           * app_2d4.c
   3           *
   4           *  Created on: 2017年8月16日
   5           *      Author: fly
   6           */
   7          
   8          #include "app.h"
   9          void app_2d4_init(void) {
  10   1      
  11   1              RF_Init();
  12   1      //      RF_Carrier(1);
  13   1      
  14   1      #if 0
                      RF_TxMode();
              #else
  17   1              RF_RxMode();
  18   1      #endif
  19   1      }
  20          uint8_t ss[16] = { 0 };
  21          uint8_t ucPayload[8] = { 1, 2, 3, 4, 5, 6, 7, 8 };
  22          static uint16_t n = 0;
  23          void app_2d4_pro(void) {
  24   1              uint16_t sta = 0;
  25   1      #if 0
                      //send data
                      sta = ucRF_GetStatus();
                      switch (sta) {
                              case TX_DS_FLAG:                // 普通型发送完成 或 增强型发送成功
                              //...
                              sprintf(ss, "ok %X", sta);
              
                              RF_ClearFIFO();
                              RF_ClearStatus();
                              break;
                              case RX_DR_FLAG://发送成功且收到payload
                              //...
                              sprintf(ss, "rx %X", sta);
                              RF_ClearFIFO();
                              RF_ClearStatus();
                              break;
                              case MAX_RT_FLAG:// 增强型发送超时失败
                              //...
              
                              sprintf(ss, "fail %X", sta);
              
                              RF_ClearFIFO();
                              RF_ClearStatus();
                              break;
                              default:// rf 处于空闲状态才发送数据
                              {
              
                                      RF_TxData(ucPayload, PAYLOAD_WIDTH);
C51 COMPILER V9.56.0.0   APP_2D4                                                           08/21/2017 21:12:41 PAGE 2   

                                      n++;
                                      sprintf(ss, "T%u %X", n, sta);
              
                              }
              
                              break;
              
                      }
                      LCD_Clear_All();
                      LCD_ShowString(ss);
              #else
  65   1              if (ucRF_DumpRxData(ucPayload, PAYLOAD_WIDTH)) {
  66   2                      //接收成功
  67   2                      static uint16_t n = 0;
  68   2                      n++;
  69   2                      sprintf(ss, "rcv %u", n);
  70   2      
  71   2                      LCD_Clear_All();
  72   2                      LCD_ShowString(ss);
  73   2              }
  74   1      #endif
  75   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     92    ----
   CONSTANT SIZE    =      7    ----
   XDATA SIZE       =     28       2
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
