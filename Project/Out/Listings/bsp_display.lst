C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE BSP_DISPLAY
OBJECT MODULE PLACED IN .\Out\Objects\bsp_display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Bsp\src\bsp_display.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common
                    -\inc;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\bsp_display.ls
                    -t) OBJECT(.\Out\Objects\bsp_display.obj)

line level    source

   1          /*
   2           * bsp_display.c
   3           *
   4           *  Created on: 2017Äê6ÔÂ26ÈÕ
   5           *      Author: fly
   6           */
   7          
   8          #include "bsp.h"
   9          #include <string.h>
  10          
  11          #define COM0    0x01
  12          #define COM1    0x02
  13          #define COM2    0x04
  14          #define COM3    0x08
  15          
  16          void LCD_display_InitHard(void) {
  17   1      
  18   1      #if 1
  19   1              P0M2 = 0x00;
  20   1              P0M1 = 0x80;
  21   1      
  22   1              P1M2 = 0x00;
  23   1              P1M1 = 0xFF;
  24   1      
  25   1              P2M2 = 0x00;
  26   1              P2M1 = 0xFF;
  27   1      
  28   1              P3M2 = 0x00;
  29   1              P3M1 = 0x0F;
  30   1      
  31   1              P4M2 = 0x00;
  32   1              P4M1 = 0xFF;
  33   1      
  34   1              P5M2 = 0x00;
  35   1              P5M1 = 0xFF;
  36   1      #endif
  37   1      
  38   1              //LCDCON = 0x40;      //;VLCD = 0.9VDD (VDD = 3.3V, VLCD = 3.0V)
  39   1              LCDCON = 0x00;                  //;1/4 duty, 1/3 bias, 150kO resistor ladder
  40   1      
  41   1              LCDCLK = 0x04;      //
  42   1      
  43   1              //enable seg pin
  44   1              LCDSEG0 = 0xFF;
  45   1              LCDSEG1 = 0xFF;
  46   1              LCDSEG2 = 0xFF;
  47   1              LCDSEG3 = 0xFF;
  48   1      
  49   1              LCDCON |= SET_BIT7;  //LCDEN = 1
  50   1      
  51   1              LCD_Clear_All();
  52   1      }
  53          
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 2   

  54          void LCD_Clear_All(void) {
  55   1              uint8_t i;
  56   1              for (i = 0; i < 32; i++) {
  57   2                      LCDPTR = i;
  58   2                      LCDDAT = 0;
  59   2              }
  60   1      }
  61          
  62          void LCD_Clear_LED_ICO(void) {
  63   1              LCDPTR = 18;
  64   1              LCDDAT &= ~ COM3;
  65   1      }
  66          void LCD_Show_LED_ICO(void) {
  67   1              LCDPTR = 18;
  68   1              LCDDAT |= COM3;
  69   1      }
  70          void LCD_Clear_FM_ICO(void) {
  71   1              LCDPTR = 14;
  72   1              LCDDAT &= ~ COM3;
  73   1      }
  74          void LCD_Show_FM_ICO(void) {
  75   1              LCDPTR = 14;
  76   1              LCDDAT |= COM3;
  77   1      }
  78          void LCD_Clear_BLUETooTH_ICO(void) {
  79   1              LCDPTR = 11;
  80   1              LCDDAT &= ~ COM3;
  81   1      }
  82          void LCD_Show_BLUETooTH_ICO(void) {
  83   1              LCDPTR = 11;
  84   1              LCDDAT |= COM3;
  85   1      }
  86          void LCD_Clear_AUX_ICO(void) {
  87   1              LCDPTR = 10;
  88   1              LCDDAT &= ~COM3;
  89   1      }
  90          void LCD_Show_AUX_ICO(void) {
  91   1              LCDPTR = 10;
  92   1              LCDDAT |= COM3;
  93   1      }
  94          void LCD_Clear_USB_ICO(void) {
  95   1              LCDPTR = 3;
  96   1              LCDDAT &= ~ COM3;
  97   1      }
  98          void LCD_Show_USB_ICO(void) {
  99   1              LCDPTR = 3;
 100   1              LCDDAT |= COM3;
 101   1      }
 102          void LCD_Clear_MHZ_ICO(void) {
 103   1              LCDPTR = 2;
 104   1              LCDDAT &= ~ COM3;
 105   1      }
 106          void LCD_Show_MHZ_ICO(void) {
 107   1              LCDPTR = 2;
 108   1              LCDDAT |= COM3;
 109   1      }
 110          void LCD_Clear_BAZOOKA_ICO(void) {
 111   1              LCDPTR = 15;
 112   1              LCDDAT &= ~ COM3;
 113   1      }
 114          void LCD_Show_BAZOOKA_ICO(void) {
 115   1              LCDPTR = 15;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 3   

 116   1              LCDDAT |= COM3;
 117   1      }
 118          
 119          /*
 120           * Ã°ºÅ   :
 121           * */
 122          
 123          void LCD_Clear_upColon_ICO(void) {
 124   1              LCDPTR = 7;
 125   1              LCDDAT &= ~ COM3;
 126   1      }
 127          void LCD_Show_upColon_ICO(void) {
 128   1              LCDPTR = 7;
 129   1              LCDDAT |= COM3;
 130   1      }
 131          void LCD_Clear_downColon_ICO(void) {
 132   1              LCDPTR = 6;
 133   1              LCDDAT &= ~ COM3;
 134   1      }
 135          void LCD_Show_downColon_ICO(void) {
 136   1              LCDPTR = 6;
 137   1              LCDDAT |= COM3;
 138   1      }
 139          void LCD_Clear_Colon_ICO(void) {
 140   1              LCD_Clear_upColon_ICO();
 141   1              LCD_Clear_downColon_ICO();
 142   1      }
 143          void LCD_Show_Colon_ICO(void) {
 144   1              LCD_Show_upColon_ICO();
 145   1              LCD_Show_downColon_ICO();
 146   1      }
 147          static void LCD_Clear_mi(uint8_t n) {
 148   1              switch (n) {
 149   2              case 0:
 150   2                      LCDPTR = 31;
 151   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 152   2      
 153   2                      LCDPTR = 30;
 154   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 155   2      
 156   2                      LCDPTR = 29;
 157   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 158   2      
 159   2                      LCDPTR = 28;
 160   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 161   2                      break;
 162   2              case 1:
 163   2                      LCDPTR = 27;
 164   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 165   2      
 166   2                      LCDPTR = 26;
 167   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 168   2      
 169   2                      LCDPTR = 25;
 170   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 171   2      
 172   2                      LCDPTR = 24;
 173   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 174   2                      break;
 175   2              case 2:
 176   2                      LCDPTR = 23;
 177   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 4   

 178   2      
 179   2                      LCDPTR = 22;
 180   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 181   2      
 182   2                      LCDPTR = 21;
 183   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 184   2      
 185   2                      LCDPTR = 20;
 186   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 187   2                      break;
 188   2              case 3:
 189   2                      LCDPTR = 19;
 190   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 191   2      
 192   2                      LCDPTR = 18;
 193   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 194   2      
 195   2                      LCDPTR = 17;
 196   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 197   2      
 198   2                      LCDPTR = 16;
 199   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 200   2                      break;
 201   2              case 4:
 202   2                      LCDPTR = 15;
 203   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 204   2      
 205   2                      LCDPTR = 14;
 206   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 207   2      
 208   2                      LCDPTR = 13;
 209   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 210   2      
 211   2                      LCDPTR = 12;
 212   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 213   2                      break;
 214   2              case 5:
 215   2                      LCDPTR = 11;
 216   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 217   2      
 218   2                      LCDPTR = 10;
 219   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 220   2      
 221   2                      LCDPTR = 9;
 222   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 223   2      
 224   2                      LCDPTR = 8;
 225   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 226   2                      break;
 227   2              case 6:
 228   2                      LCDPTR = 7;
 229   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 230   2      
 231   2                      LCDPTR = 6;
 232   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 233   2      
 234   2                      LCDPTR = 5;
 235   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 236   2      
 237   2                      LCDPTR = 4;
 238   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 239   2                      break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 5   

 240   2              case 7:
 241   2                      LCDPTR = 3;
 242   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 243   2      
 244   2                      LCDPTR = 2;
 245   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 246   2      
 247   2                      LCDPTR = 1;
 248   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 249   2      
 250   2                      LCDPTR = 0;
 251   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 252   2                      break;
 253   2              }
 254   1      }
 255          void LCD_Clear_mi_all(void) {
 256   1              uint8_t i = 0;
 257   1              for (i = 0; i < 8; i++) {
 258   2                      LCD_Clear_mi(i);
 259   2              }
 260   1      }
 261          void LCD_ShowChar(uint8_t n, char c) {
 262   1              if (n > 7) {
 263   2                      return;
 264   2              }
 265   1      
 266   1              if (c == 'S' || c == 's') {
 267   2                      c = '5';
 268   2              } else if (c == 'g') {
 269   2                      c = '9';
 270   2              } else if (c == 'l') {
 271   2                      c = 'L';
 272   2              } else if (c == 'p') {
 273   2                      c = 'P';
 274   2              } else if (c == 'x') {
 275   2                      c = 'X';
 276   2              }
 277   1              switch (c) {
 278   2              case '0':
 279   2                      LCDPTR = 31 - n * 4;
 280   2                      LCDDAT = COM0 + COM2;
 281   2      
 282   2                      LCDPTR = 30 - n * 4;
 283   2                      LCDDAT = COM0 + COM2;
 284   2      
 285   2                      LCDPTR = 29 - n * 4;
 286   2                      LCDDAT = COM0 + COM3;
 287   2      
 288   2                      LCDPTR = 28 - n * 4;
 289   2                      LCDDAT = COM0 + COM3;
 290   2                      break;
 291   2              case '1':
 292   2                      LCDPTR = 31 - n * 4;
 293   2                      LCDDAT = 0;
 294   2      
 295   2                      LCDPTR = 30 - n * 4;
 296   2                      LCDDAT = 0;
 297   2      
 298   2                      LCDPTR = 29 - n * 4;
 299   2                      LCDDAT = COM0;
 300   2      
 301   2                      LCDPTR = 28 - n * 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 6   

 302   2                      LCDDAT = COM0 + COM3;
 303   2                      break;
 304   2              case '2':
 305   2                      LCDPTR = 31 - n * 4;
 306   2                      LCDDAT = COM1 + COM2;
 307   2      
 308   2                      LCDPTR = 30 - n * 4;
 309   2                      LCDDAT = COM0;
 310   2      
 311   2                      LCDPTR = 29 - n * 4;
 312   2                      LCDDAT = COM3;
 313   2      
 314   2                      LCDPTR = 28 - n * 4;
 315   2                      LCDDAT = COM0 + COM1;
 316   2                      break;
 317   2              case '3':
 318   2                      LCDPTR = 31 - n * 4;
 319   2                      LCDDAT = COM1;
 320   2      
 321   2                      LCDPTR = 30 - n * 4;
 322   2                      LCDDAT = COM0;
 323   2      
 324   2                      LCDPTR = 29 - n * 4;
 325   2                      LCDDAT = COM3;
 326   2      
 327   2                      LCDPTR = 28 - n * 4;
 328   2                      LCDDAT = COM0 + COM1 + COM3;
 329   2                      break;
 330   2              case '4':
 331   2                      LCDPTR = 31 - n * 4;
 332   2                      LCDDAT = COM0 + COM1;
 333   2      
 334   2                      LCDPTR = 30 - n * 4;
 335   2                      LCDDAT = 0;
 336   2      
 337   2                      LCDPTR = 29 - n * 4;
 338   2                      LCDDAT = 0;
 339   2      
 340   2                      LCDPTR = 28 - n * 4;
 341   2                      LCDDAT = COM0 + COM1 + COM3;
 342   2                      break;
 343   2              case '5':
 344   2                      LCDPTR = 31 - n * 4;
 345   2                      LCDDAT = COM0 + COM1;
 346   2      
 347   2                      LCDPTR = 30 - n * 4;
 348   2                      LCDDAT = COM0;
 349   2      
 350   2                      LCDPTR = 29 - n * 4;
 351   2                      LCDDAT = COM3;
 352   2      
 353   2                      LCDPTR = 28 - n * 4;
 354   2                      LCDDAT = COM1 + COM3;
 355   2                      break;
 356   2              case '6':
 357   2                      LCDPTR = 31 - n * 4;
 358   2                      LCDDAT = COM0 + COM1 + COM2;
 359   2      
 360   2                      LCDPTR = 30 - n * 4;
 361   2                      LCDDAT = COM0;
 362   2      
 363   2                      LCDPTR = 29 - n * 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 7   

 364   2                      LCDDAT = COM3;
 365   2      
 366   2                      LCDPTR = 28 - n * 4;
 367   2                      LCDDAT = COM1 + COM3;
 368   2                      break;
 369   2              case '7':
 370   2                      LCDPTR = 31 - n * 4;
 371   2                      LCDDAT = 0;
 372   2      
 373   2                      LCDPTR = 30 - n * 4;
 374   2                      LCDDAT = COM0;
 375   2      
 376   2                      LCDPTR = 29 - n * 4;
 377   2                      LCDDAT = 0;
 378   2      
 379   2                      LCDPTR = 28 - n * 4;
 380   2                      LCDDAT = COM0 + COM3;
 381   2                      break;
 382   2              case '8':
 383   2                      LCDPTR = 31 - n * 4;
 384   2                      LCDDAT = COM0 + COM1 + COM2;
 385   2      
 386   2                      LCDPTR = 30 - n * 4;
 387   2                      LCDDAT = COM0;
 388   2      
 389   2                      LCDPTR = 29 - n * 4;
 390   2                      LCDDAT = COM3;
 391   2      
 392   2                      LCDPTR = 28 - n * 4;
 393   2                      LCDDAT = COM0 + COM1 + COM3;
 394   2                      break;
 395   2              case '9':
 396   2                      LCDPTR = 31 - n * 4;
 397   2                      LCDDAT = COM0 + COM1;
 398   2      
 399   2                      LCDPTR = 30 - n * 4;
 400   2                      LCDDAT = COM0;
 401   2      
 402   2                      LCDPTR = 29 - n * 4;
 403   2                      LCDDAT = COM3;
 404   2      
 405   2                      LCDPTR = 28 - n * 4;
 406   2                      LCDDAT = COM0 + COM1 + COM3;
 407   2                      break;
 408   2              case ' ':
 409   2                      LCD_Clear_mi(n);
 410   2                      break;
 411   2              case 'A':
 412   2                      LCDPTR = 31 - n * 4;
 413   2                      LCDDAT = COM0 + COM1 + COM2;
 414   2      
 415   2                      LCDPTR = 30 - n * 4;
 416   2                      LCDDAT = COM0;
 417   2      
 418   2                      LCDPTR = 29 - n * 4;
 419   2                      LCDDAT = 0;
 420   2      
 421   2                      LCDPTR = 28 - n * 4;
 422   2                      LCDDAT = COM0 + COM1 + COM3;
 423   2                      break;
 424   2              case 'B':
 425   2                      LCDPTR = 31 - n * 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 8   

 426   2                      LCDDAT = 0;
 427   2      
 428   2                      LCDPTR = 30 - n * 4;
 429   2                      LCDDAT = COM0;
 430   2      
 431   2                      LCDPTR = 29 - n * 4;
 432   2                      LCDDAT = COM1 + COM2 + COM3;
 433   2      
 434   2                      LCDPTR = 28 - n * 4;
 435   2                      LCDDAT = COM0 + COM1 + COM3;
 436   2                      break;
 437   2              case 'C':
 438   2                      LCDPTR = 31 - n * 4;
 439   2                      LCDDAT = COM0 + COM2;
 440   2      
 441   2                      LCDPTR = 30 - n * 4;
 442   2                      LCDDAT = COM0;
 443   2      
 444   2                      LCDPTR = 29 - n * 4;
 445   2                      LCDDAT = COM3;
 446   2      
 447   2                      LCDPTR = 28 - n * 4;
 448   2                      LCDDAT = 0;
 449   2                      break;
 450   2              case 'D':
 451   2                      LCDPTR = 31 - n * 4;
 452   2                      LCDDAT = 0;
 453   2      
 454   2                      LCDPTR = 30 - n * 4;
 455   2                      LCDDAT = COM0;
 456   2      
 457   2                      LCDPTR = 29 - n * 4;
 458   2                      LCDDAT = COM1 + COM2 + COM3;
 459   2      
 460   2                      LCDPTR = 28 - n * 4;
 461   2                      LCDDAT = COM0 + COM3;
 462   2                      break;
 463   2              case 'E':
 464   2                      LCDPTR = 31 - n * 4;
 465   2                      LCDDAT = COM0 + COM1 + COM2;
 466   2      
 467   2                      LCDPTR = 30 - n * 4;
 468   2                      LCDDAT = COM0;
 469   2      
 470   2                      LCDPTR = 29 - n * 4;
 471   2                      LCDDAT = COM3;
 472   2      
 473   2                      LCDPTR = 28 - n * 4;
 474   2                      LCDDAT = COM1;
 475   2                      break;
 476   2              case 'F':
 477   2                      LCDPTR = 31 - n * 4;
 478   2                      LCDDAT = COM0 + COM1 + COM2;
 479   2      
 480   2                      LCDPTR = 30 - n * 4;
 481   2                      LCDDAT = COM0;
 482   2      
 483   2                      LCDPTR = 29 - n * 4;
 484   2                      LCDDAT = 0;
 485   2      
 486   2                      LCDPTR = 28 - n * 4;
 487   2                      LCDDAT = COM1;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 9   

 488   2                      break;
 489   2              case 'G':
 490   2                      LCDPTR = 31 - n * 4;
 491   2                      LCDDAT = COM0 + COM2;
 492   2      
 493   2                      LCDPTR = 30 - n * 4;
 494   2                      LCDDAT = COM0;
 495   2      
 496   2                      LCDPTR = 29 - n * 4;
 497   2                      LCDDAT = COM3;
 498   2      
 499   2                      LCDPTR = 28 - n * 4;
 500   2                      LCDDAT = COM1 + COM3;
 501   2                      break;
 502   2              case 'H':
 503   2                      LCDPTR = 31 - n * 4;
 504   2                      LCDDAT = COM0 + COM1 + COM2;
 505   2      
 506   2                      LCDPTR = 30 - n * 4;
 507   2                      LCDDAT = 0;
 508   2      
 509   2                      LCDPTR = 29 - n * 4;
 510   2                      LCDDAT = 0;
 511   2      
 512   2                      LCDPTR = 28 - n * 4;
 513   2                      LCDDAT = COM0 + COM1 + COM3;
 514   2                      break;
 515   2              case 'I':
 516   2                      LCDPTR = 31 - n * 4;
 517   2                      LCDDAT = 0;
 518   2      
 519   2                      LCDPTR = 30 - n * 4;
 520   2                      LCDDAT = COM0;
 521   2      
 522   2                      LCDPTR = 29 - n * 4;
 523   2                      LCDDAT = COM1 + COM2 + COM3;
 524   2      
 525   2                      LCDPTR = 28 - n * 4;
 526   2                      LCDDAT = 0;
 527   2                      break;
 528   2              case 'J':
 529   2                      LCDPTR = 31 - n * 4;
 530   2                      LCDDAT = COM2;
 531   2      
 532   2                      LCDPTR = 30 - n * 4;
 533   2                      LCDDAT = 0;
 534   2      
 535   2                      LCDPTR = 29 - n * 4;
 536   2                      LCDDAT = COM3;
 537   2      
 538   2                      LCDPTR = 28 - n * 4;
 539   2                      LCDDAT = COM0 + COM3;
 540   2                      break;
 541   2              case 'K':
 542   2                      LCDPTR = 31 - n * 4;
 543   2                      LCDDAT = COM0 + COM1 + COM2;
 544   2      
 545   2                      LCDPTR = 30 - n * 4;
 546   2                      LCDDAT = 0;
 547   2      
 548   2                      LCDPTR = 29 - n * 4;
 549   2                      LCDDAT = COM0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 10  

 550   2      
 551   2                      LCDPTR = 28 - n * 4;
 552   2                      LCDDAT = COM1 + COM3;
 553   2                      break;
 554   2              case 'L':
 555   2                      LCDPTR = 31 - n * 4;
 556   2                      LCDDAT = COM0 + COM2;
 557   2      
 558   2                      LCDPTR = 30 - n * 4;
 559   2                      LCDDAT = 0;
 560   2      
 561   2                      LCDPTR = 29 - n * 4;
 562   2                      LCDDAT = COM3;
 563   2      
 564   2                      LCDPTR = 28 - n * 4;
 565   2                      LCDDAT = 0;
 566   2                      break;
 567   2              case 'M':
 568   2                      LCDPTR = 31 - n * 4;
 569   2                      LCDDAT = COM0 + COM2;
 570   2      
 571   2                      LCDPTR = 30 - n * 4;
 572   2                      LCDDAT = COM1;
 573   2      
 574   2                      LCDPTR = 29 - n * 4;
 575   2                      LCDDAT = COM0 + COM2;
 576   2      
 577   2                      LCDPTR = 28 - n * 4;
 578   2                      LCDDAT = COM0 + COM3;
 579   2                      break;
 580   2              case 'N':
 581   2                      LCDPTR = 31 - n * 4;
 582   2                      LCDDAT = COM0 + COM2;
 583   2      
 584   2                      LCDPTR = 30 - n * 4;
 585   2                      LCDDAT = COM0;
 586   2      
 587   2                      LCDPTR = 29 - n * 4;
 588   2                      LCDDAT = 0;
 589   2      
 590   2                      LCDPTR = 28 - n * 4;
 591   2                      LCDDAT = COM0 + COM3;
 592   2                      break;
 593   2              case 'O':
 594   2                      LCDPTR = 31 - n * 4;
 595   2                      LCDDAT = COM0 + COM2;
 596   2      
 597   2                      LCDPTR = 30 - n * 4;
 598   2                      LCDDAT = COM0;
 599   2      
 600   2                      LCDPTR = 29 - n * 4;
 601   2                      LCDDAT = COM3;
 602   2      
 603   2                      LCDPTR = 28 - n * 4;
 604   2                      LCDDAT = COM0 + COM3;
 605   2                      break;
 606   2              case 'P':
 607   2                      LCDPTR = 31 - n * 4;
 608   2                      LCDDAT = COM0 + COM1 + COM2;
 609   2      
 610   2                      LCDPTR = 30 - n * 4;
 611   2                      LCDDAT = COM0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 11  

 612   2      
 613   2                      LCDPTR = 29 - n * 4;
 614   2                      LCDDAT = 0;
 615   2      
 616   2                      LCDPTR = 28 - n * 4;
 617   2                      LCDDAT = COM0 + COM1;
 618   2                      break;
 619   2              case 'Q':
 620   2                      LCDPTR = 31 - n * 4;
 621   2                      LCDDAT = COM0 + COM2;
 622   2      
 623   2                      LCDPTR = 30 - n * 4;
 624   2                      LCDDAT = COM0;
 625   2      
 626   2                      LCDPTR = 29 - n * 4;
 627   2                      LCDDAT = COM3;
 628   2      
 629   2                      LCDPTR = 28 - n * 4;
 630   2                      LCDDAT = COM0 + COM2 + COM3;
 631   2                      break;
 632   2              case 'R':
 633   2                      LCDPTR = 31 - n * 4;
 634   2                      LCDDAT = COM0 + COM1 + COM2;
 635   2      
 636   2                      LCDPTR = 30 - n * 4;
 637   2                      LCDDAT = COM0;
 638   2      
 639   2                      LCDPTR = 29 - n * 4;
 640   2                      LCDDAT = 0;
 641   2      
 642   2                      LCDPTR = 28 - n * 4;
 643   2                      LCDDAT = COM0 + COM1 + COM2;
 644   2                      break;
 645   2              case 'S':
 646   2                      break;
 647   2              case 'T':
 648   2                      LCDPTR = 31 - n * 4;
 649   2                      LCDDAT = 0;
 650   2      
 651   2                      LCDPTR = 30 - n * 4;
 652   2                      LCDDAT = COM0;
 653   2      
 654   2                      LCDPTR = 29 - n * 4;
 655   2                      LCDDAT = COM1 + COM2;
 656   2      
 657   2                      LCDPTR = 28 - n * 4;
 658   2                      LCDDAT = 0;
 659   2                      break;
 660   2              case 'U':
 661   2                      LCDPTR = 31 - n * 4;
 662   2                      LCDDAT = COM0 + COM2;
 663   2      
 664   2                      LCDPTR = 30 - n * 4;
 665   2                      LCDDAT = 0;
 666   2      
 667   2                      LCDPTR = 29 - n * 4;
 668   2                      LCDDAT = COM3;
 669   2      
 670   2                      LCDPTR = 28 - n * 4;
 671   2                      LCDDAT = COM0 + COM3;
 672   2                      break;
 673   2              case 'V':
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 12  

 674   2                      LCDPTR = 31 - n * 4;
 675   2                      LCDDAT = 0;
 676   2      
 677   2                      LCDPTR = 30 - n * 4;
 678   2                      LCDDAT = COM1;
 679   2      
 680   2                      LCDPTR = 29 - n * 4;
 681   2                      LCDDAT = 0;
 682   2      
 683   2                      LCDPTR = 28 - n * 4;
 684   2                      LCDDAT = COM0 + COM2 + COM3;
 685   2                      break;
 686   2              case 'W':
 687   2                      LCDPTR = 31 - n * 4;
 688   2                      LCDDAT = COM0 + COM2;
 689   2      
 690   2                      LCDPTR = 30 - n * 4;
 691   2                      LCDDAT = 0;
 692   2      
 693   2                      LCDPTR = 29 - n * 4;
 694   2                      LCDDAT = COM1 + COM2 + COM3;
 695   2      
 696   2                      LCDPTR = 28 - n * 4;
 697   2                      LCDDAT = COM0 + COM3;
 698   2                      break;
 699   2              case 'X':
 700   2                      LCDPTR = 31 - n * 4;
 701   2                      LCDDAT = 0;
 702   2      
 703   2                      LCDPTR = 30 - n * 4;
 704   2                      LCDDAT = COM1 + COM2;
 705   2      
 706   2                      LCDPTR = 29 - n * 4;
 707   2                      LCDDAT = COM0;
 708   2      
 709   2                      LCDPTR = 28 - n * 4;
 710   2                      LCDDAT = COM2;
 711   2                      break;
 712   2              case 'Y':
 713   2                      LCDPTR = 31 - n * 4;
 714   2                      LCDDAT = COM0 + COM1;
 715   2      
 716   2                      LCDPTR = 30 - n * 4;
 717   2                      LCDDAT = 0;
 718   2      
 719   2                      LCDPTR = 29 - n * 4;
 720   2                      LCDDAT = COM3;
 721   2      
 722   2                      LCDPTR = 28 - n * 4;
 723   2                      LCDDAT = COM0 + COM1 + COM3;
 724   2                      break;
 725   2              case 'Z':
 726   2                      LCDPTR = 31 - n * 4;
 727   2                      LCDDAT = COM1;
 728   2      
 729   2                      LCDPTR = 30 - n * 4;
 730   2                      LCDDAT = COM0 + COM2;
 731   2      
 732   2                      LCDPTR = 29 - n * 4;
 733   2                      LCDDAT = COM0 + COM3;
 734   2      
 735   2                      LCDPTR = 28 - n * 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 13  

 736   2                      LCDDAT = COM1;
 737   2                      break;
 738   2              case 'a':
 739   2                      LCDPTR = 31 - n * 4;
 740   2                      LCDDAT = COM1 + COM2;
 741   2      
 742   2                      LCDPTR = 30 - n * 4;
 743   2                      LCDDAT = COM0;
 744   2      
 745   2                      LCDPTR = 29 - n * 4;
 746   2                      LCDDAT = COM3;
 747   2      
 748   2                      LCDPTR = 28 - n * 4;
 749   2                      LCDDAT = COM0 + COM1 + COM3;
 750   2                      break;
 751   2              case 'b':
 752   2                      LCDPTR = 31 - n * 4;
 753   2                      LCDDAT = COM0 + COM1 + COM2;
 754   2      
 755   2                      LCDPTR = 30 - n * 4;
 756   2                      LCDDAT = 0;
 757   2      
 758   2                      LCDPTR = 29 - n * 4;
 759   2                      LCDDAT = COM3;
 760   2      
 761   2                      LCDPTR = 28 - n * 4;
 762   2                      LCDDAT = COM1 + COM3;
 763   2                      break;
 764   2              case 'c':
 765   2                      LCDPTR = 31 - n * 4;
 766   2                      LCDDAT = COM1 + COM2;
 767   2      
 768   2                      LCDPTR = 30 - n * 4;
 769   2                      LCDDAT = 0;
 770   2      
 771   2                      LCDPTR = 29 - n * 4;
 772   2                      LCDDAT = COM3;
 773   2      
 774   2                      LCDPTR = 28 - n * 4;
 775   2                      LCDDAT = COM1;
 776   2                      break;
 777   2              case 'd':
 778   2                      LCDPTR = 31 - n * 4;
 779   2                      LCDDAT = COM1 + COM2;
 780   2      
 781   2                      LCDPTR = 30 - n * 4;
 782   2                      LCDDAT = 0;
 783   2      
 784   2                      LCDPTR = 29 - n * 4;
 785   2                      LCDDAT = COM3;
 786   2      
 787   2                      LCDPTR = 28 - n * 4;
 788   2                      LCDDAT = COM0 + COM1 + COM3;
 789   2                      break;
 790   2              case 'e':
 791   2                      LCDPTR = 31 - n * 4;
 792   2                      LCDDAT = COM0 + COM1 + COM2;
 793   2      
 794   2                      LCDPTR = 30 - n * 4;
 795   2                      LCDDAT = COM0;
 796   2      
 797   2                      LCDPTR = 29 - n * 4;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 14  

 798   2                      LCDDAT = COM3;
 799   2      
 800   2                      LCDPTR = 28 - n * 4;
 801   2                      LCDDAT = COM0 + COM1;
 802   2                      break;
 803   2              case 'f':
 804   2                      LCDPTR = 31 - n * 4;
 805   2                      LCDDAT = COM0 + COM1 + COM2;
 806   2      
 807   2                      LCDPTR = 30 - n * 4;
 808   2                      LCDDAT = COM0;
 809   2      
 810   2                      LCDPTR = 29 - n * 4;
 811   2                      LCDDAT = 0;
 812   2      
 813   2                      LCDPTR = 28 - n * 4;
 814   2                      LCDDAT = 0;
 815   2                      break;
 816   2              case 'g':
 817   2                      break;
 818   2              case 'h':
 819   2                      LCDPTR = 31 - n * 4;
 820   2                      LCDDAT = COM0 + COM1 + COM2;
 821   2      
 822   2                      LCDPTR = 30 - n * 4;
 823   2                      LCDDAT = 0;
 824   2      
 825   2                      LCDPTR = 29 - n * 4;
 826   2                      LCDDAT = 0;
 827   2      
 828   2                      LCDPTR = 28 - n * 4;
 829   2                      LCDDAT = COM1 + COM3;
 830   2                      break;
 831   2              case 'i':
 832   2                      LCDPTR = 31 - n * 4;
 833   2                      LCDDAT = 0;
 834   2      
 835   2                      LCDPTR = 30 - n * 4;
 836   2                      LCDDAT = 0;
 837   2      
 838   2                      LCDPTR = 29 - n * 4;
 839   2                      LCDDAT = COM1 + COM2;
 840   2      
 841   2                      LCDPTR = 28 - n * 4;
 842   2                      LCDDAT = 0;
 843   2                      break;
 844   2              case 'j':
 845   2                      LCDPTR = 31 - n * 4;
 846   2                      LCDDAT = 0;
 847   2      
 848   2                      LCDPTR = 30 - n * 4;
 849   2                      LCDDAT = 0;
 850   2      
 851   2                      LCDPTR = 29 - n * 4;
 852   2                      LCDDAT = COM3;
 853   2      
 854   2                      LCDPTR = 28 - n * 4;
 855   2                      LCDDAT = COM0 + COM3;
 856   2                      break;
 857   2              case 'k':
 858   2                      LCDPTR = 31 - n * 4;
 859   2                      LCDDAT = COM0 + COM1 + COM2;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 15  

 860   2      
 861   2                      LCDPTR = 30 - n * 4;
 862   2                      LCDDAT = 0;
 863   2      
 864   2                      LCDPTR = 29 - n * 4;
 865   2                      LCDDAT = COM0;
 866   2      
 867   2                      LCDPTR = 28 - n * 4;
 868   2                      LCDDAT = COM2;
 869   2                      break;
 870   2              case 'l':
 871   2                      break;
 872   2              case 'm':
 873   2                      LCDPTR = 31 - n * 4;
 874   2                      LCDDAT = COM1 + COM2;
 875   2      
 876   2                      LCDPTR = 30 - n * 4;
 877   2                      LCDDAT = 0;
 878   2      
 879   2                      LCDPTR = 29 - n * 4;
 880   2                      LCDDAT = COM2;
 881   2      
 882   2                      LCDPTR = 28 - n * 4;
 883   2                      LCDDAT = COM1 + COM3;
 884   2                      break;
 885   2              case 'n':
 886   2                      LCDPTR = 31 - n * 4;
 887   2                      LCDDAT = COM1 + COM2;
 888   2      
 889   2                      LCDPTR = 30 - n * 4;
 890   2                      LCDDAT = 0;
 891   2      
 892   2                      LCDPTR = 29 - n * 4;
 893   2                      LCDDAT = 0;
 894   2      
 895   2                      LCDPTR = 28 - n * 4;
 896   2                      LCDDAT = COM1 + COM3;
 897   2                      break;
 898   2              case 'o':
 899   2                      LCDPTR = 31 - n * 4;
 900   2                      LCDDAT = COM1 + COM2;
 901   2      
 902   2                      LCDPTR = 30 - n * 4;
 903   2                      LCDDAT = 0;
 904   2      
 905   2                      LCDPTR = 29 - n * 4;
 906   2                      LCDDAT = COM3;
 907   2      
 908   2                      LCDPTR = 28 - n * 4;
 909   2                      LCDDAT = COM1 + COM3;
 910   2                      break;
 911   2              case 'p':
 912   2                      break;
 913   2              case 'q':
 914   2                      LCDPTR = 31 - n * 4;
 915   2                      LCDDAT = COM0 + COM1;
 916   2      
 917   2                      LCDPTR = 30 - n * 4;
 918   2                      LCDDAT = COM0;
 919   2      
 920   2                      LCDPTR = 29 - n * 4;
 921   2                      LCDDAT = 0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 16  

 922   2      
 923   2                      LCDPTR = 28 - n * 4;
 924   2                      LCDDAT = COM0 + COM1 + COM3;
 925   2                      break;
 926   2              case 'r':
 927   2                      LCDPTR = 31 - n * 4;
 928   2                      LCDDAT = 0;
 929   2      
 930   2                      LCDPTR = 30 - n * 4;
 931   2                      LCDDAT = 0;
 932   2      
 933   2                      LCDPTR = 29 - n * 4;
 934   2                      LCDDAT = COM2;
 935   2      
 936   2                      LCDPTR = 28 - n * 4;
 937   2                      LCDDAT = COM1;
 938   2                      break;
 939   2              case 's':
 940   2                      break;
 941   2              case 't':
 942   2                      LCDPTR = 31 - n * 4;
 943   2                      LCDDAT = COM0 + COM1 + COM2;
 944   2      
 945   2                      LCDPTR = 30 - n * 4;
 946   2                      LCDDAT = 0;
 947   2      
 948   2                      LCDPTR = 29 - n * 4;
 949   2                      LCDDAT = COM3;
 950   2      
 951   2                      LCDPTR = 28 - n * 4;
 952   2                      LCDDAT = COM1;
 953   2                      break;
 954   2              case 'u':
 955   2                      LCDPTR = 31 - n * 4;
 956   2                      LCDDAT = COM2;
 957   2      
 958   2                      LCDPTR = 30 - n * 4;
 959   2                      LCDDAT = 0;
 960   2      
 961   2                      LCDPTR = 29 - n * 4;
 962   2                      LCDDAT = COM3;
 963   2      
 964   2                      LCDPTR = 28 - n * 4;
 965   2                      LCDDAT = COM3;
 966   2                      break;
 967   2              case 'v':
 968   2                      LCDPTR = 31 - n * 4;
 969   2                      LCDDAT = 0;
 970   2      
 971   2                      LCDPTR = 30 - n * 4;
 972   2                      LCDDAT = 0;
 973   2      
 974   2                      LCDPTR = 29 - n * 4;
 975   2                      LCDDAT = 0;
 976   2      
 977   2                      LCDPTR = 28 - n * 4;
 978   2                      LCDDAT = COM2 + COM3;
 979   2                      break;
 980   2              case 'w':
 981   2                      LCDPTR = 31 - n * 4;
 982   2                      LCDDAT = COM2;
 983   2      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 17  

 984   2                      LCDPTR = 30 - n * 4;
 985   2                      LCDDAT = 0;
 986   2      
 987   2                      LCDPTR = 29 - n * 4;
 988   2                      LCDDAT = COM2 + COM3;
 989   2      
 990   2                      LCDPTR = 28 - n * 4;
 991   2                      LCDDAT = COM3;
 992   2                      break;
 993   2              case 'x':
 994   2                      break;
 995   2              case 'y':
 996   2                      LCDPTR = 31 - n * 4;
 997   2                      LCDDAT = 0;
 998   2      
 999   2                      LCDPTR = 30 - n * 4;
1000   2                      LCDDAT = COM1;
1001   2      
1002   2                      LCDPTR = 29 - n * 4;
1003   2                      LCDDAT = COM0 + COM2;
1004   2      
1005   2                      LCDPTR = 28 - n * 4;
1006   2                      LCDDAT = 0;
1007   2                      break;
1008   2              case 'z':
1009   2                      LCDPTR = 31 - n * 4;
1010   2                      LCDDAT = 0;
1011   2      
1012   2                      LCDPTR = 30 - n * 4;
1013   2                      LCDDAT = COM0 + COM2;
1014   2      
1015   2                      LCDPTR = 29 - n * 4;
1016   2                      LCDDAT = COM0 + COM3;
1017   2      
1018   2                      LCDPTR = 28 - n * 4;
1019   2                      LCDDAT = 0;
1020   2                      break;
1021   2      
1022   2              }
1023   1      }
1024          
1025          void LCD_ShowString(char *s) {
1026   1              uint8_t i = 0;
1027   1              uint8_t len = 0;
1028   1              BIT b = 0;
1029   1      
1030   1              if (s == 0) {
1031   2                      return;
1032   2              }
1033   1              len = strlen(s);
1034   1              if (len >= 8) {
1035   2                      for (i = 0; i < 8; i++) {
1036   3                              LCD_ShowChar(i, *(s + i));
1037   3                      }
1038   2              } else {
1039   2                      for (i = 0; i < 8; i++) {
1040   3                              if (b == 0) {
1041   4                                      if (*(s + i) != 0) {
1042   5                                              LCD_ShowChar(i, *(s + i));
1043   5                                      } else {
1044   5                                              b = 1;
1045   5                                              LCD_ShowChar(i, ' ');
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/29/2017 22:43:10 PAGE 18  

1046   5                                      }
1047   4                              } else {
1048   4                                      LCD_ShowChar(i, ' ');
1049   4                              }
1050   3                      }
1051   2              }
1052   1      
1053   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2750    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       4
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
