C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE BSP_DISPLAY
OBJECT MODULE PLACED IN .\Out\Objects\bsp_display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Bsp\src\bsp_display.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\Common
                    -\inc;..\App\inc;..\Bsp\inc;..\Startup;..\Bsp) DEFINE(FOSC_110592) DEBUG OBJECTEXTEND PRINT(.\Out\Listings\bsp_display.ls
                    -t) OBJECT(.\Out\Objects\bsp_display.obj)

line level    source

   1          /*
   2           * bsp_display.c
   3           *
   4           *  Created on: 2017Äê6ÔÂ26ÈÕ
   5           *      Author: fly
   6           */
   7          
   8          #include "bsp.h"
   9          
  10          #define COM0    0x01
  11          #define COM1    0x02
  12          #define COM2    0x04
  13          #define COM3    0x08
  14          
  15          void LCD_display_InitHard(void) {
  16   1      
  17   1      #if 1
  18   1              P0M2 = 0x00;
  19   1              P0M1 = 0x80;
  20   1      
  21   1              P1M2 = 0x00;
  22   1              P1M1 = 0xFF;
  23   1      
  24   1              P2M2 = 0x00;
  25   1              P2M1 = 0xFF;
  26   1      
  27   1              P3M2 = 0x00;
  28   1              P3M1 = 0x0F;
  29   1      
  30   1              P4M2 = 0x00;
  31   1              P4M1 = 0xFF;
  32   1      
  33   1              P5M2 = 0x00;
  34   1              P5M1 = 0xFF;
  35   1      #endif
  36   1      
  37   1              //LCDCON = 0x40;      //;VLCD = 0.9VDD (VDD = 3.3V, VLCD = 3.0V)
  38   1              LCDCON = 0x00;                  //;1/4 duty, 1/3 bias, 150kO resistor ladder
  39   1      
  40   1              LCDCLK = 0x04;      //
  41   1      
  42   1              //enable seg pin
  43   1              LCDSEG0 = 0xFF;
  44   1              LCDSEG1 = 0xFF;
  45   1              LCDSEG2 = 0xFF;
  46   1              LCDSEG3 = 0xFF;
  47   1      
  48   1              LCDCON |= SET_BIT7;  //LCDEN = 1
  49   1      
  50   1              LCD_Clear_All();
  51   1      }
  52          
  53          void LCD_Clear_All(void) {
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 2   

  54   1              uint8_t i;
  55   1              for (i = 0; i < 32; i++) {
  56   2                      LCDPTR = i;
  57   2                      LCDDAT = 0;
  58   2              }
  59   1      }
  60          
  61          void LCD_Clear_LED_ICO(void) {
  62   1              LCDPTR = 18;
  63   1              LCDDAT &= ~ COM3;
  64   1      }
  65          void LCD_Show_LED_ICO(void) {
  66   1              LCDPTR = 18;
  67   1              LCDDAT |= COM3;
  68   1      }
  69          void LCD_Clear_FM_ICO(void) {
  70   1              LCDPTR = 14;
  71   1              LCDDAT &= ~ COM3;
  72   1      }
  73          void LCD_Show_FM_ICO(void) {
  74   1              LCDPTR = 14;
  75   1              LCDDAT |= COM3;
  76   1      }
  77          void LCD_Clear_BLUETooTH_ICO(void) {
  78   1              LCDPTR = 11;
  79   1              LCDDAT &= ~ COM3;
  80   1      }
  81          void LCD_Show_BLUETooTH_ICO(void) {
  82   1              LCDPTR = 11;
  83   1              LCDDAT |= COM3;
  84   1      }
  85          void LCD_Clear_AUX_ICO(void) {
  86   1              LCDPTR = 10;
  87   1              LCDDAT &= ~COM3;
  88   1      }
  89          void LCD_Show_AUX_ICO(void) {
  90   1              LCDPTR = 10;
  91   1              LCDDAT |= COM3;
  92   1      }
  93          void LCD_Clear_USB_ICO(void) {
  94   1              LCDPTR = 3;
  95   1              LCDDAT &= ~ COM3;
  96   1      }
  97          void LCD_Show_USB_ICO(void) {
  98   1              LCDPTR = 3;
  99   1              LCDDAT |= COM3;
 100   1      }
 101          void LCD_Clear_MHZ_ICO(void) {
 102   1              LCDPTR = 2;
 103   1              LCDDAT &= ~ COM3;
 104   1      }
 105          void LCD_Show_MHZ_ICO(void) {
 106   1              LCDPTR = 2;
 107   1              LCDDAT |= COM3;
 108   1      }
 109          void LCD_Clear_BAZOOKA_ICO(void) {
 110   1              LCDPTR = 15;
 111   1              LCDDAT &= ~ COM3;
 112   1      }
 113          void LCD_Show_BAZOOKA_ICO(void) {
 114   1              LCDPTR = 15;
 115   1              LCDDAT |= COM3;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 3   

 116   1      }
 117          /*
 118           * Ã°ºÅ   :
 119           * */
 120          void LCD_Clear_upColon_ICO(void) {
 121   1              LCDPTR = 7;
 122   1              LCDDAT &= ~ COM3;
 123   1      }
 124          void LCD_Show_upColon_ICO(void) {
 125   1              LCDPTR = 7;
 126   1              LCDDAT |= COM3;
 127   1      }
 128          void LCD_Clear_downColon_ICO(void) {
 129   1              LCDPTR = 6;
 130   1              LCDDAT &= ~ COM3;
 131   1      }
 132          void LCD_Show_downColon_ICO(void) {
 133   1              LCDPTR = 6;
 134   1              LCDDAT |= COM3;
 135   1      }
 136          
 137          void LCD_Clear_mi(uint8_t n) {
 138   1              switch (n) {
 139   2              case 0:
 140   2                      LCDPTR = 31;
 141   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 142   2      
 143   2                      LCDPTR = 30;
 144   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 145   2      
 146   2                      LCDPTR = 29;
 147   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 148   2      
 149   2                      LCDPTR = 28;
 150   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 151   2                      break;
 152   2              case 1:
 153   2                      LCDPTR = 27;
 154   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 155   2      
 156   2                      LCDPTR = 26;
 157   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 158   2      
 159   2                      LCDPTR = 25;
 160   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 161   2      
 162   2                      LCDPTR = 24;
 163   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 164   2                      break;
 165   2              case 2:
 166   2                      LCDPTR = 23;
 167   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 168   2      
 169   2                      LCDPTR = 22;
 170   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 171   2      
 172   2                      LCDPTR = 21;
 173   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 174   2      
 175   2                      LCDPTR = 20;
 176   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 177   2                      break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 4   

 178   2              case 3:
 179   2                      LCDPTR = 19;
 180   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 181   2      
 182   2                      LCDPTR = 18;
 183   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 184   2      
 185   2                      LCDPTR = 17;
 186   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 187   2      
 188   2                      LCDPTR = 16;
 189   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 190   2                      break;
 191   2              case 4:
 192   2                      LCDPTR = 15;
 193   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 194   2      
 195   2                      LCDPTR = 14;
 196   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 197   2      
 198   2                      LCDPTR = 13;
 199   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 200   2      
 201   2                      LCDPTR = 12;
 202   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 203   2                      break;
 204   2              case 5:
 205   2                      LCDPTR = 11;
 206   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 207   2      
 208   2                      LCDPTR = 10;
 209   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 210   2      
 211   2                      LCDPTR = 9;
 212   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 213   2      
 214   2                      LCDPTR = 8;
 215   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 216   2                      break;
 217   2              case 6:
 218   2                      LCDPTR = 7;
 219   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 220   2      
 221   2                      LCDPTR = 6;
 222   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 223   2      
 224   2                      LCDPTR = 5;
 225   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 226   2      
 227   2                      LCDPTR = 4;
 228   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 229   2                      break;
 230   2              case 7:
 231   2                      LCDPTR = 3;
 232   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 233   2      
 234   2                      LCDPTR = 2;
 235   2                      LCDDAT &= ~(COM0 + COM1 + COM2);
 236   2      
 237   2                      LCDPTR = 1;
 238   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 239   2      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 5   

 240   2                      LCDPTR = 0;
 241   2                      LCDDAT &= ~(COM0 + COM1 + COM2 + COM3);
 242   2                      break;
 243   2              }
 244   1      }
 245          void LCD_Clear_mi_all(void) {
 246   1              uint8_t i = 0;
 247   1              for (i = 0; i < 8; i++) {
 248   2                      LCD_Clear_mi(i);
 249   2              }
 250   1      }
 251          void LCD_Show_mi_(uint8_t n, char c) {
 252   1              if (n > 7) {
 253   2                      return;
 254   2              }
 255   1      
 256   1              switch (c) {
 257   2              case '0':
 258   2                      LCDPTR = 31 - n * 4;
 259   2                      LCDDAT = COM0 + COM2;
 260   2      
 261   2                      LCDPTR = 30 - n * 4;
 262   2                      LCDDAT = COM0 + COM2;
 263   2      
 264   2                      LCDPTR = 29 - n * 4;
 265   2                      LCDDAT = COM0 + COM3;
 266   2      
 267   2                      LCDPTR = 28 - n * 4;
 268   2                      LCDDAT = COM0 + COM3;
 269   2                      break;
 270   2              case '1':
 271   2                      LCDPTR = 31 - n * 4;
 272   2                      LCDDAT = 0;
 273   2      
 274   2                      LCDPTR = 30 - n * 4;
 275   2                      LCDDAT = 0;
 276   2      
 277   2                      LCDPTR = 29 - n * 4;
 278   2                      LCDDAT = COM0;
 279   2      
 280   2                      LCDPTR = 28 - n * 4;
 281   2                      LCDDAT = COM0 + COM3;
 282   2                      break;
 283   2              case '2':
 284   2                      LCDPTR = 31 - n * 4;
 285   2                      LCDDAT = COM1 + COM2;
 286   2      
 287   2                      LCDPTR = 30 - n * 4;
 288   2                      LCDDAT = COM0;
 289   2      
 290   2                      LCDPTR = 29 - n * 4;
 291   2                      LCDDAT = COM3;
 292   2      
 293   2                      LCDPTR = 28 - n * 4;
 294   2                      LCDDAT = COM0 + COM1;
 295   2                      break;
 296   2              case '3':
 297   2                      LCDPTR = 31 - n * 4;
 298   2                      LCDDAT = COM1;
 299   2      
 300   2                      LCDPTR = 30 - n * 4;
 301   2                      LCDDAT = COM0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 6   

 302   2      
 303   2                      LCDPTR = 29 - n * 4;
 304   2                      LCDDAT = COM3;
 305   2      
 306   2                      LCDPTR = 28 - n * 4;
 307   2                      LCDDAT = COM0 + COM1 + COM3;
 308   2                      break;
 309   2              case '4':
 310   2                      LCDPTR = 31 - n * 4;
 311   2                      LCDDAT = COM0 + COM1;
 312   2      
 313   2                      LCDPTR = 30 - n * 4;
 314   2                      LCDDAT = 0;
 315   2      
 316   2                      LCDPTR = 29 - n * 4;
 317   2                      LCDDAT = 0;
 318   2      
 319   2                      LCDPTR = 28 - n * 4;
 320   2                      LCDDAT = COM0 + COM1 + COM3;
 321   2                      break;
 322   2              case '5':
 323   2                      LCDPTR = 31 - n * 4;
 324   2                      LCDDAT = COM0 + COM1;
 325   2      
 326   2                      LCDPTR = 30 - n * 4;
 327   2                      LCDDAT = COM0;
 328   2      
 329   2                      LCDPTR = 29 - n * 4;
 330   2                      LCDDAT = COM3;
 331   2      
 332   2                      LCDPTR = 28 - n * 4;
 333   2                      LCDDAT = COM1 + COM3;
 334   2                      break;
 335   2              case '6':
 336   2                      LCDPTR = 31 - n * 4;
 337   2                      LCDDAT = COM0 + COM1 + COM2;
 338   2      
 339   2                      LCDPTR = 30 - n * 4;
 340   2                      LCDDAT = COM0;
 341   2      
 342   2                      LCDPTR = 29 - n * 4;
 343   2                      LCDDAT = COM3;
 344   2      
 345   2                      LCDPTR = 28 - n * 4;
 346   2                      LCDDAT = COM1 + COM3;
 347   2                      break;
 348   2              case '7':
 349   2                      LCDPTR = 31 - n * 4;
 350   2                      LCDDAT = 0;
 351   2      
 352   2                      LCDPTR = 30 - n * 4;
 353   2                      LCDDAT = COM0;
 354   2      
 355   2                      LCDPTR = 29 - n * 4;
 356   2                      LCDDAT = 0;
 357   2      
 358   2                      LCDPTR = 28 - n * 4;
 359   2                      LCDDAT = COM0 + COM3;
 360   2                      break;
 361   2              case '8':
 362   2                      LCDPTR = 31 - n * 4;
 363   2                      LCDDAT = COM0 + COM1 + COM2;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 7   

 364   2      
 365   2                      LCDPTR = 30 - n * 4;
 366   2                      LCDDAT = COM0;
 367   2      
 368   2                      LCDPTR = 29 - n * 4;
 369   2                      LCDDAT = COM3;
 370   2      
 371   2                      LCDPTR = 28 - n * 4;
 372   2                      LCDDAT = COM0 + COM1 + COM3;
 373   2                      break;
 374   2              case '9':
 375   2                      LCDPTR = 31 - n * 4;
 376   2                      LCDDAT = COM0 + COM1;
 377   2      
 378   2                      LCDPTR = 30 - n * 4;
 379   2                      LCDDAT = COM0;
 380   2      
 381   2                      LCDPTR = 29 - n * 4;
 382   2                      LCDDAT = COM3;
 383   2      
 384   2                      LCDPTR = 28 - n * 4;
 385   2                      LCDDAT = COM0 + COM1 + COM3;
 386   2                      break;
 387   2              case ' ':
 388   2                      LCD_Clear_mi(n);
 389   2                      break;
 390   2              case 'A':
 391   2                      LCDPTR = 31 - n * 4;
 392   2                      LCDDAT = COM0 + COM1 + COM2;
 393   2      
 394   2                      LCDPTR = 30 - n * 4;
 395   2                      LCDDAT = COM0;
 396   2      
 397   2                      LCDPTR = 29 - n * 4;
 398   2                      LCDDAT = 0;
 399   2      
 400   2                      LCDPTR = 28 - n * 4;
 401   2                      LCDDAT = COM0 + COM1 + COM3;
 402   2                      break;
 403   2              case 'B':
 404   2                      LCDPTR = 31 - n * 4;
 405   2                      LCDDAT = 0;
 406   2      
 407   2                      LCDPTR = 30 - n * 4;
 408   2                      LCDDAT = COM0;
 409   2      
 410   2                      LCDPTR = 29 - n * 4;
 411   2                      LCDDAT = COM1 + COM2 + COM3;
 412   2      
 413   2                      LCDPTR = 28 - n * 4;
 414   2                      LCDDAT = COM0 + COM1 + COM3;
 415   2                      break;
 416   2              case 'C':
 417   2                      LCDPTR = 31 - n * 4;
 418   2                      LCDDAT = COM0 + COM2;
 419   2      
 420   2                      LCDPTR = 30 - n * 4;
 421   2                      LCDDAT = COM0 + COM2;
 422   2      
 423   2                      LCDPTR = 29 - n * 4;
 424   2                      LCDDAT = COM0 + COM3;
 425   2      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 8   

 426   2                      LCDPTR = 28 - n * 4;
 427   2                      LCDDAT = 0;
 428   2                      break;
 429   2              case 'D':
 430   2                      LCDPTR = 31 - n * 4;
 431   2                      LCDDAT = 0;
 432   2      
 433   2                      LCDPTR = 30 - n * 4;
 434   2                      LCDDAT = COM0;
 435   2      
 436   2                      LCDPTR = 29 - n * 4;
 437   2                      LCDDAT = COM1 + COM2 + COM3;
 438   2      
 439   2                      LCDPTR = 28 - n * 4;
 440   2                      LCDDAT = COM0 + COM3;
 441   2                      break;
 442   2              case 'E':
 443   2                      LCDPTR = 31 - n * 4;
 444   2                      LCDDAT = COM0 + COM1 + COM2;
 445   2      
 446   2                      LCDPTR = 30 - n * 4;
 447   2                      LCDDAT = COM0;
 448   2      
 449   2                      LCDPTR = 29 - n * 4;
 450   2                      LCDDAT = COM3;
 451   2      
 452   2                      LCDPTR = 28 - n * 4;
 453   2                      LCDDAT = COM1;
 454   2                      break;
 455   2              case 'F':
 456   2                      LCDPTR = 31 - n * 4;
 457   2                      LCDDAT = COM0 + COM1 + COM2;
 458   2      
 459   2                      LCDPTR = 30 - n * 4;
 460   2                      LCDDAT = COM0;
 461   2      
 462   2                      LCDPTR = 29 - n * 4;
 463   2                      LCDDAT = 0;
 464   2      
 465   2                      LCDPTR = 28 - n * 4;
 466   2                      LCDDAT = COM1;
 467   2                      break;
 468   2              case 'G':
 469   2      
 470   2                      break;
 471   2              case 'H':
 472   2      
 473   2                      break;
 474   2              case 'I':
 475   2      
 476   2                      break;
 477   2              case 'J':
 478   2      
 479   2                      break;
 480   2              case 'K':
 481   2      
 482   2                      break;
 483   2              case 'L':
 484   2      
 485   2                      break;
 486   2              case 'M':
 487   2      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 9   

 488   2                      break;
 489   2              case 'N':
 490   2      
 491   2                      break;
 492   2              case 'O':
 493   2      
 494   2                      break;
 495   2              case 'P':
 496   2      
 497   2                      break;
 498   2              case 'Q':
 499   2      
 500   2                      break;
 501   2              case 'R':
 502   2      
 503   2                      break;
 504   2              case 'S':
 505   2      
 506   2                      break;
 507   2              case 'T':
 508   2      
 509   2                      break;
 510   2              case 'U':
 511   2      
 512   2                      break;
 513   2              case 'V':
 514   2      
 515   2                      break;
 516   2              case 'W':
 517   2      
 518   2                      break;
 519   2              case 'X':
 520   2      
 521   2                      break;
 522   2              case 'Y':
 523   2      
 524   2                      break;
 525   2              case 'Z':
 526   2      
 527   2                      break;
 528   2              }
 529   1      }
 530          void LCD_Show_mi(uint8_t n, char c) {
 531   1              switch (n) {
 532   2              case 0: {
 533   3                      switch (c) {
 534   4                      case '0':
 535   4                              LCDPTR = 31;
 536   4                              LCDDAT = COM0 + COM2;
 537   4      
 538   4                              LCDPTR = 30;
 539   4                              LCDDAT = COM0 + COM2;
 540   4      
 541   4                              LCDPTR = 29;
 542   4                              LCDDAT = COM0 + COM3;
 543   4      
 544   4                              LCDPTR = 28;
 545   4                              LCDDAT = COM0 + COM3;
 546   4                              break;
 547   4                      case '1':
 548   4                              LCDPTR = 31;
 549   4                              LCDDAT = 0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 10  

 550   4      
 551   4                              LCDPTR = 30;
 552   4                              LCDDAT = 0;
 553   4      
 554   4                              LCDPTR = 29;
 555   4                              LCDDAT = COM0;
 556   4      
 557   4                              LCDPTR = 28;
 558   4                              LCDDAT = COM0 + COM3;
 559   4                              break;
 560   4                      case '2':
 561   4                              LCDPTR = 31;
 562   4                              LCDDAT = COM1 + COM2;
 563   4      
 564   4                              LCDPTR = 30;
 565   4                              LCDDAT = COM0;
 566   4      
 567   4                              LCDPTR = 29;
 568   4                              LCDDAT = COM3;
 569   4      
 570   4                              LCDPTR = 28;
 571   4                              LCDDAT = COM0 + COM1;
 572   4                              break;
 573   4                      case '3':
 574   4                              LCDPTR = 31;
 575   4                              LCDDAT = COM1;
 576   4      
 577   4                              LCDPTR = 30;
 578   4                              LCDDAT = COM0;
 579   4      
 580   4                              LCDPTR = 29;
 581   4                              LCDDAT = COM3;
 582   4      
 583   4                              LCDPTR = 28;
 584   4                              LCDDAT = COM0 + COM1 + COM3;
 585   4                              break;
 586   4                      case '4':
 587   4                              LCDPTR = 31;
 588   4                              LCDDAT = COM0 + COM1;
 589   4      
 590   4                              LCDPTR = 30;
 591   4                              LCDDAT = 0;
 592   4      
 593   4                              LCDPTR = 29;
 594   4                              LCDDAT = 0;
 595   4      
 596   4                              LCDPTR = 28;
 597   4                              LCDDAT = COM0 + COM1 + COM3;
 598   4                              break;
 599   4                      case '5':
 600   4                              LCDPTR = 31;
 601   4                              LCDDAT = COM0 + COM1;
 602   4      
 603   4                              LCDPTR = 30;
 604   4                              LCDDAT = COM0;
 605   4      
 606   4                              LCDPTR = 29;
 607   4                              LCDDAT = COM3;
 608   4      
 609   4                              LCDPTR = 28;
 610   4                              LCDDAT = COM1 + COM3;
 611   4                              break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 11  

 612   4                      case '6':
 613   4                              LCDPTR = 31;
 614   4                              LCDDAT = COM0 + COM1 + COM2;
 615   4      
 616   4                              LCDPTR = 30;
 617   4                              LCDDAT = COM0;
 618   4      
 619   4                              LCDPTR = 29;
 620   4                              LCDDAT = COM3;
 621   4      
 622   4                              LCDPTR = 28;
 623   4                              LCDDAT = COM1 + COM3;
 624   4                              break;
 625   4                      case '7':
 626   4                              LCDPTR = 31;
 627   4                              LCDDAT = 0;
 628   4      
 629   4                              LCDPTR = 30;
 630   4                              LCDDAT = COM0;
 631   4      
 632   4                              LCDPTR = 29;
 633   4                              LCDDAT = 0;
 634   4      
 635   4                              LCDPTR = 28;
 636   4                              LCDDAT = COM0 + COM3;
 637   4                              break;
 638   4                      case '8':
 639   4                              LCDPTR = 31;
 640   4                              LCDDAT = COM0 + COM1 + COM2;
 641   4      
 642   4                              LCDPTR = 30;
 643   4                              LCDDAT = COM0;
 644   4      
 645   4                              LCDPTR = 29;
 646   4                              LCDDAT = COM3;
 647   4      
 648   4                              LCDPTR = 28;
 649   4                              LCDDAT = COM0 + COM1 + COM3;
 650   4                              break;
 651   4                      case '9':
 652   4                              LCDPTR = 31;
 653   4                              LCDDAT = COM0 + COM1;
 654   4      
 655   4                              LCDPTR = 30;
 656   4                              LCDDAT = COM0;
 657   4      
 658   4                              LCDPTR = 29;
 659   4                              LCDDAT = COM3;
 660   4      
 661   4                              LCDPTR = 28;
 662   4                              LCDDAT = COM0 + COM1 + COM3;
 663   4                              break;
 664   4                      case ' ':
 665   4                              LCD_Clear_mi(n);
 666   4                              break;
 667   4                      case 'A':
 668   4      
 669   4                              break;
 670   4                      case 'B':
 671   4      
 672   4                              break;
 673   4                      case 'C':
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 12  

 674   4      
 675   4                              break;
 676   4                      case 'D':
 677   4      
 678   4                              break;
 679   4                      case 'E':
 680   4      
 681   4                              break;
 682   4                      case 'F':
 683   4      
 684   4                              break;
 685   4                      case 'G':
 686   4      
 687   4                              break;
 688   4                      }
 689   3              }
 690   2                      break;
 691   2              case 1: {
 692   3                      switch (c) {
 693   4                      case '0':
 694   4                              LCDPTR = 27;
 695   4                              LCDDAT = COM0 + COM2;
 696   4      
 697   4                              LCDPTR = 26;
 698   4                              LCDDAT = COM0 + COM2;
 699   4      
 700   4                              LCDPTR = 25;
 701   4                              LCDDAT = COM0 + COM3;
 702   4      
 703   4                              LCDPTR = 24;
 704   4                              LCDDAT = COM0 + COM3;
 705   4                              break;
 706   4                      case '1':
 707   4                              LCDPTR = 27;
 708   4                              LCDDAT = 0;
 709   4      
 710   4                              LCDPTR = 26;
 711   4                              LCDDAT = 0;
 712   4      
 713   4                              LCDPTR = 25;
 714   4                              LCDDAT = COM0;
 715   4      
 716   4                              LCDPTR = 24;
 717   4                              LCDDAT = COM0 + COM3;
 718   4                              break;
 719   4                      case '2':
 720   4                              LCDPTR = 27;
 721   4                              LCDDAT = COM1 + COM2;
 722   4      
 723   4                              LCDPTR = 26;
 724   4                              LCDDAT = COM0;
 725   4      
 726   4                              LCDPTR = 25;
 727   4                              LCDDAT = COM3;
 728   4      
 729   4                              LCDPTR = 24;
 730   4                              LCDDAT = COM0 + COM1;
 731   4                              break;
 732   4                      case '3':
 733   4                              LCDPTR = 27;
 734   4                              LCDDAT = COM1;
 735   4      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 13  

 736   4                              LCDPTR = 26;
 737   4                              LCDDAT = COM0;
 738   4      
 739   4                              LCDPTR = 25;
 740   4                              LCDDAT = COM3;
 741   4      
 742   4                              LCDPTR = 24;
 743   4                              LCDDAT = COM0 + COM1 + COM3;
 744   4                              break;
 745   4                      case '4':
 746   4                              LCDPTR = 27;
 747   4                              LCDDAT = COM0 + COM1;
 748   4      
 749   4                              LCDPTR = 26;
 750   4                              LCDDAT = 0;
 751   4      
 752   4                              LCDPTR = 25;
 753   4                              LCDDAT = 0;
 754   4      
 755   4                              LCDPTR = 24;
 756   4                              LCDDAT = COM0 + COM1 + COM3;
 757   4                              break;
 758   4                      case '5':
 759   4                              LCDPTR = 27;
 760   4                              LCDDAT = COM0 + COM1;
 761   4      
 762   4                              LCDPTR = 26;
 763   4                              LCDDAT = COM0;
 764   4      
 765   4                              LCDPTR = 25;
 766   4                              LCDDAT = COM3;
 767   4      
 768   4                              LCDPTR = 24;
 769   4                              LCDDAT = COM1 + COM3;
 770   4                              break;
 771   4                      case '6':
 772   4                              LCDPTR = 27;
 773   4                              LCDDAT = COM0 + COM1 + COM2;
 774   4      
 775   4                              LCDPTR = 26;
 776   4                              LCDDAT = COM0;
 777   4      
 778   4                              LCDPTR = 25;
 779   4                              LCDDAT = COM3;
 780   4      
 781   4                              LCDPTR = 24;
 782   4                              LCDDAT = COM1 + COM3;
 783   4                              break;
 784   4                      case '7':
 785   4                              LCDPTR = 27;
 786   4                              LCDDAT = 0;
 787   4      
 788   4                              LCDPTR = 26;
 789   4                              LCDDAT = COM0;
 790   4      
 791   4                              LCDPTR = 25;
 792   4                              LCDDAT = 0;
 793   4      
 794   4                              LCDPTR = 24;
 795   4                              LCDDAT = COM0 + COM3;
 796   4                              break;
 797   4                      case '8':
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 14  

 798   4                              LCDPTR = 27;
 799   4                              LCDDAT = COM0 + COM1 + COM2;
 800   4      
 801   4                              LCDPTR = 26;
 802   4                              LCDDAT = COM0;
 803   4      
 804   4                              LCDPTR = 25;
 805   4                              LCDDAT = COM3;
 806   4      
 807   4                              LCDPTR = 24;
 808   4                              LCDDAT = COM0 + COM1 + COM3;
 809   4                              break;
 810   4                      case '9':
 811   4                              LCDPTR = 27;
 812   4                              LCDDAT = COM0 + COM1;
 813   4      
 814   4                              LCDPTR = 26;
 815   4                              LCDDAT = COM0;
 816   4      
 817   4                              LCDPTR = 25;
 818   4                              LCDDAT = COM3;
 819   4      
 820   4                              LCDPTR = 24;
 821   4                              LCDDAT = COM0 + COM1 + COM3;
 822   4                              break;
 823   4                      case ' ':
 824   4                              LCD_Clear_mi(n);
 825   4                              break;
 826   4                      }
 827   3              }
 828   2                      break;
 829   2              case 2:
 830   2                      break;
 831   2              case 3:
 832   2                      break;
 833   2              case 4:
 834   2                      break;
 835   2              case 5:
 836   2                      break;
 837   2              case 6:
 838   2                      break;
 839   2              case 7:
 840   2                      break;
 841   2              }
 842   1      }
 843          
 844          void LCD_Show_REP_Num(uint8_t num) {
 845   1              uint8_t ge;
 846   1              uint8_t shi;
 847   1      
 848   1              if (num > 99) {
 849   2                      return;
 850   2              }
 851   1      
 852   1              shi = num / 10;
 853   1              ge = num % 10;
 854   1              if (num > 9) {
 855   2      //              set_SEG14EN;
 856   2      //              set_SEG15EN;
 857   2                      switch (shi) {
 858   3                      case 0:
 859   3                              LCDPTR = 14;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 15  

 860   3                              LCDDAT = COM1 + COM3;
 861   3      
 862   3                              LCDPTR = 15;
 863   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 864   3                              break;
 865   3                      case 1:
 866   3                              LCDPTR = 14;
 867   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 868   3      
 869   3                              LCDPTR = 15;
 870   3                              LCDDAT = COM1 + COM2;
 871   3                              break;
 872   3                      case 2:
 873   3                              LCDPTR = 14;
 874   3                              LCDDAT = COM2 + COM3;
 875   3      
 876   3                              LCDPTR = 15;
 877   3                              LCDDAT = COM0 + COM1 + COM3;
 878   3                              break;
 879   3                      case 3:
 880   3                              LCDPTR = 14;
 881   3                              LCDDAT = COM2;
 882   3      
 883   3                              LCDPTR = 15;
 884   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 885   3                              break;
 886   3                      case 4:
 887   3                              LCDPTR = 14;
 888   3                              LCDDAT = COM1 + COM2;
 889   3      
 890   3                              LCDPTR = 15;
 891   3                              LCDDAT = COM1 + COM2;
 892   3                              break;
 893   3                      case 5:
 894   3                              LCDPTR = 14;
 895   3                              LCDDAT = COM1 + COM2;
 896   3      
 897   3                              LCDPTR = 15;
 898   3                              LCDDAT = COM0 + COM2 + COM3;
 899   3                              break;
 900   3                      case 6:
 901   3                              LCDPTR = 14;
 902   3                              LCDDAT = COM1 + COM2 + COM3;
 903   3      
 904   3                              LCDPTR = 15;
 905   3                              LCDDAT = COM0 + COM2 + COM3;
 906   3                              break;
 907   3                      case 7:
 908   3                              LCDPTR = 14;
 909   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
 910   3      
 911   3                              LCDPTR = 15;
 912   3                              LCDDAT = COM0 + COM1 + COM2;
 913   3                              break;
 914   3                      case 8:
 915   3                              LCDPTR = 14;
 916   3                              LCDDAT = COM1 + COM2 + COM3;
 917   3      
 918   3                              LCDPTR = 15;
 919   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 920   3                              break;
 921   3                      case 9:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 16  

 922   3                              LCDPTR = 14;
 923   3                              LCDDAT = COM1 + COM2;
 924   3      
 925   3                              LCDPTR = 15;
 926   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
 927   3                              break;
 928   3                      }
 929   2              } else {
 930   2      //              clr_SEG14EN;
 931   2      //              clr_SEG15EN;
 932   2      
 933   2                      LCDPTR = 14;
 934   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 935   2      //              LCDDAT = COM0 + COM1 + COM2 + COM3;
 936   2      
 937   2                      LCDPTR = 15;
 938   2                      LCDDAT = 0;
 939   2      //              LCDDAT = COM0 + COM1 + COM2 + COM3;
 940   2              }
 941   1      //      set_SEG16EN;
 942   1      //      set_SEG17EN;
 943   1              switch (ge) {
 944   2              case 0:
 945   2                      LCDPTR = 16;
 946   2                      LCDDAT = COM1 + COM3;
 947   2      
 948   2                      LCDPTR = 17;
 949   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 950   2                      break;
 951   2              case 1:
 952   2                      LCDPTR = 16;
 953   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 954   2      
 955   2                      LCDPTR = 17;
 956   2                      LCDDAT = COM1 + COM2;
 957   2                      break;
 958   2              case 2:
 959   2                      LCDPTR = 16;
 960   2                      LCDDAT = COM2 + COM3;
 961   2      
 962   2                      LCDPTR = 17;
 963   2                      LCDDAT = COM0 + COM1 + COM3;
 964   2                      break;
 965   2              case 3:
 966   2                      LCDPTR = 16;
 967   2                      LCDDAT = COM2;
 968   2      
 969   2                      LCDPTR = 17;
 970   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
 971   2                      break;
 972   2              case 4:
 973   2                      LCDPTR = 16;
 974   2                      LCDDAT = COM1 + COM2;
 975   2      
 976   2                      LCDPTR = 17;
 977   2                      LCDDAT = COM1 + COM2;
 978   2                      break;
 979   2              case 5:
 980   2                      LCDPTR = 16;
 981   2                      LCDDAT = COM1 + COM2;
 982   2      
 983   2                      LCDPTR = 17;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 17  

 984   2                      LCDDAT = COM0 + COM2 + COM3;
 985   2                      break;
 986   2              case 6:
 987   2                      LCDPTR = 16;
 988   2                      LCDDAT = COM1 + COM2 + COM3;
 989   2      
 990   2                      LCDPTR = 17;
 991   2                      LCDDAT = COM0 + COM2 + COM3;
 992   2                      break;
 993   2              case 7:
 994   2                      LCDPTR = 16;
 995   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
 996   2      
 997   2                      LCDPTR = 17;
 998   2                      LCDDAT = COM0 + COM1 + COM2;
 999   2                      break;
1000   2              case 8:
1001   2                      LCDPTR = 16;
1002   2                      LCDDAT = COM1 + COM2 + COM3;
1003   2      
1004   2                      LCDPTR = 17;
1005   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1006   2                      break;
1007   2              case 9:
1008   2                      LCDPTR = 16;
1009   2                      LCDDAT = COM1 + COM2;
1010   2      
1011   2                      LCDPTR = 17;
1012   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1013   2                      break;
1014   2              }
1015   1      }
1016          void LCD_Clear_ABCD(void) {
1017   1      //      clr_SEG18EN;
1018   1              LCDPTR = 18;
1019   1              LCDDAT = 0;
1020   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1021   1      }
1022          void LCD_Show_ABCD_all(void) {
1023   1      //      set_SEG18EN;
1024   1              LCDPTR = 18;
1025   1              LCDDAT = COM0 + COM1 + COM2 + COM3;
1026   1      }
1027          void LCD_Show_ABCD(char c) {
1028   1      //      set_SEG18EN;
1029   1              LCDPTR = 18;
1030   1      
1031   1              switch (c) {
1032   2              case 'A':
1033   2                      LCDDAT = COM0;
1034   2                      break;
1035   2              case 'B':
1036   2                      LCDDAT = COM1;
1037   2                      break;
1038   2              case 'C':
1039   2                      LCDDAT = COM2;
1040   2                      break;
1041   2              case 'D':
1042   2                      LCDDAT = COM3;
1043   2                      break;
1044   2              default:
1045   2      //              LCDPTR = 18;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 18  

1046   2      //              LCDDAT = 0;
1047   2                      break;
1048   2              }
1049   1      }
1050          void LCD_Clear_Pulls_Num(void) {
1051   1      
1052   1              LCDPTR = 8;
1053   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1054   1      //      LCDDAT = COM1 + COM2 + COM3;
1055   1      
1056   1              LCDPTR = 9;
1057   1              LCDDAT = 0;
1058   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1059   1      
1060   1              LCDPTR = 10;
1061   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1062   1      //      LCDDAT = COM1 + COM2 + COM3;
1063   1      
1064   1              LCDPTR = 11;
1065   1              LCDDAT = 0;
1066   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1067   1      
1068   1              LCDPTR = 12;
1069   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1070   1      //      LCDDAT = COM1 + COM2 + COM3;
1071   1      
1072   1              LCDPTR = 13;
1073   1              LCDDAT = 0;
1074   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1075   1      }
1076          void LCD_Show_Pulls_Num(uint16_t num) {
1077   1              uint8_t ge;
1078   1              uint8_t shi;
1079   1              uint8_t bai;
1080   1      
1081   1              if (num > 999) {
1082   2      
1083   2                      return;
1084   2              }
1085   1              bai = num / 100;
1086   1              shi = num % 100 / 10;
1087   1              ge = num % 10;
1088   1              if (num > 99) {
1089   2      //              set_SEG8EN;
1090   2      //              set_SEG9EN;
1091   2      
1092   2                      switch (bai) {
1093   3                      case 0:
1094   3                              LCDPTR = 8;
1095   3                              LCDDAT = COM1 + COM3;
1096   3      
1097   3                              LCDPTR = 9;
1098   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1099   3                              break;
1100   3                      case 1:
1101   3                              LCDPTR = 8;
1102   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1103   3      
1104   3                              LCDPTR = 9;
1105   3                              LCDDAT = COM1 + COM2;
1106   3                              break;
1107   3                      case 2:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 19  

1108   3                              LCDPTR = 8;
1109   3                              LCDDAT = COM2 + COM3;
1110   3      
1111   3                              LCDPTR = 9;
1112   3                              LCDDAT = COM0 + COM1 + COM3;
1113   3                              break;
1114   3                      case 3:
1115   3                              LCDPTR = 8;
1116   3                              LCDDAT = COM2;
1117   3      
1118   3                              LCDPTR = 9;
1119   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1120   3                              break;
1121   3                      case 4:
1122   3                              LCDPTR = 8;
1123   3                              LCDDAT = COM1 + COM2;
1124   3      
1125   3                              LCDPTR = 9;
1126   3                              LCDDAT = COM1 + COM2;
1127   3                              break;
1128   3                      case 5:
1129   3                              LCDPTR = 8;
1130   3                              LCDDAT = COM1 + COM2;
1131   3      
1132   3                              LCDPTR = 9;
1133   3                              LCDDAT = COM0 + COM2 + COM3;
1134   3                              break;
1135   3                      case 6:
1136   3                              LCDPTR = 8;
1137   3                              LCDDAT = COM1 + COM2 + COM3;
1138   3      
1139   3                              LCDPTR = 9;
1140   3                              LCDDAT = COM0 + COM2 + COM3;
1141   3                              break;
1142   3                      case 7:
1143   3                              LCDPTR = 8;
1144   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1145   3      
1146   3                              LCDPTR = 9;
1147   3                              LCDDAT = COM0 + COM1 + COM2;
1148   3                              break;
1149   3                      case 8:
1150   3                              LCDPTR = 8;
1151   3                              LCDDAT = COM1 + COM2 + COM3;
1152   3      
1153   3                              LCDPTR = 9;
1154   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1155   3                              break;
1156   3                      case 9:
1157   3                              LCDPTR = 8;
1158   3                              LCDDAT = COM1 + COM2;
1159   3      
1160   3                              LCDPTR = 9;
1161   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1162   3                              break;
1163   3                      }
1164   2              } else {
1165   2                      LCDPTR = 8;
1166   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1167   2      
1168   2                      LCDPTR = 9;
1169   2                      LCDDAT = 0;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 20  

1170   2              }
1171   1              if (num > 9) {
1172   2                      set_SEG10EN;
1173   2                      set_SEG11EN;
1174   2      
1175   2                      switch (shi) {
1176   3                      case 0:
1177   3                              LCDPTR = 10;
1178   3                              LCDDAT = COM1 + COM3;
1179   3      
1180   3                              LCDPTR = 11;
1181   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1182   3                              break;
1183   3                      case 1:
1184   3                              LCDPTR = 10;
1185   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1186   3      
1187   3                              LCDPTR = 11;
1188   3                              LCDDAT = COM1 + COM2;
1189   3                              break;
1190   3                      case 2:
1191   3                              LCDPTR = 10;
1192   3                              LCDDAT = COM2 + COM3;
1193   3      
1194   3                              LCDPTR = 11;
1195   3                              LCDDAT = COM0 + COM1 + COM3;
1196   3                              break;
1197   3                      case 3:
1198   3                              LCDPTR = 10;
1199   3                              LCDDAT = COM2;
1200   3      
1201   3                              LCDPTR = 11;
1202   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1203   3                              break;
1204   3                      case 4:
1205   3                              LCDPTR = 10;
1206   3                              LCDDAT = COM1 + COM2;
1207   3      
1208   3                              LCDPTR = 11;
1209   3                              LCDDAT = COM1 + COM2;
1210   3                              break;
1211   3                      case 5:
1212   3                              LCDPTR = 10;
1213   3                              LCDDAT = COM1 + COM2;
1214   3      
1215   3                              LCDPTR = 11;
1216   3                              LCDDAT = COM0 + COM2 + COM3;
1217   3                              break;
1218   3                      case 6:
1219   3                              LCDPTR = 10;
1220   3                              LCDDAT = COM1 + COM2 + COM3;
1221   3      
1222   3                              LCDPTR = 11;
1223   3                              LCDDAT = COM0 + COM2 + COM3;
1224   3                              break;
1225   3                      case 7:
1226   3                              LCDPTR = 10;
1227   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1228   3      
1229   3                              LCDPTR = 11;
1230   3                              LCDDAT = COM0 + COM1 + COM2;
1231   3                              break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 21  

1232   3                      case 8:
1233   3                              LCDPTR = 10;
1234   3                              LCDDAT = COM1 + COM2 + COM3;
1235   3      
1236   3                              LCDPTR = 11;
1237   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1238   3                              break;
1239   3                      case 9:
1240   3                              LCDPTR = 10;
1241   3                              LCDDAT = COM1 + COM2;
1242   3      
1243   3                              LCDPTR = 11;
1244   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1245   3                              break;
1246   3                      }
1247   2              } else {
1248   2      //              clr_SEG10EN;
1249   2      //              clr_SEG11EN;
1250   2                      LCDPTR = 10;
1251   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1252   2      
1253   2                      LCDPTR = 11;
1254   2                      LCDDAT = 0;
1255   2              }
1256   1      //      set_SEG12EN;
1257   1      //      set_SEG13EN;
1258   1              switch (ge) {
1259   2              case 0:
1260   2                      LCDPTR = 12;
1261   2                      LCDDAT = COM1 + COM3;
1262   2      
1263   2                      LCDPTR = 13;
1264   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1265   2                      break;
1266   2              case 1:
1267   2                      LCDPTR = 12;
1268   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1269   2      
1270   2                      LCDPTR = 13;
1271   2                      LCDDAT = COM1 + COM2;
1272   2                      break;
1273   2              case 2:
1274   2                      LCDPTR = 12;
1275   2                      LCDDAT = COM2 + COM3;
1276   2      
1277   2                      LCDPTR = 13;
1278   2                      LCDDAT = COM0 + COM1 + COM3;
1279   2                      break;
1280   2              case 3:
1281   2                      LCDPTR = 12;
1282   2                      LCDDAT = COM2;
1283   2      
1284   2                      LCDPTR = 13;
1285   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1286   2                      break;
1287   2              case 4:
1288   2                      LCDPTR = 12;
1289   2                      LCDDAT = COM1 + COM2;
1290   2      
1291   2                      LCDPTR = 13;
1292   2                      LCDDAT = COM1 + COM2;
1293   2                      break;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 22  

1294   2              case 5:
1295   2                      LCDPTR = 12;
1296   2                      LCDDAT = COM1 + COM2;
1297   2      
1298   2                      LCDPTR = 13;
1299   2                      LCDDAT = COM0 + COM2 + COM3;
1300   2                      break;
1301   2              case 6:
1302   2                      LCDPTR = 12;
1303   2                      LCDDAT = COM1 + COM2 + COM3;
1304   2      
1305   2                      LCDPTR = 13;
1306   2                      LCDDAT = COM0 + COM2 + COM3;
1307   2                      break;
1308   2              case 7:
1309   2                      LCDPTR = 12;
1310   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1311   2      
1312   2                      LCDPTR = 13;
1313   2                      LCDDAT = COM0 + COM1 + COM2;
1314   2                      break;
1315   2              case 8:
1316   2                      LCDPTR = 12;
1317   2                      LCDDAT = COM1 + COM2 + COM3;
1318   2      
1319   2                      LCDPTR = 13;
1320   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1321   2                      break;
1322   2              case 9:
1323   2                      LCDPTR = 12;
1324   2                      LCDDAT = COM1 + COM2;
1325   2      
1326   2                      LCDPTR = 13;
1327   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1328   2                      break;
1329   2              }
1330   1      }
1331          void LCD_Clear_QS_ICO(void) {
1332   1      //      clr_SEG2EN;
1333   1              LCDPTR = 2;
1334   1              LCDDAT &= ~ COM0;
1335   1      }
1336          void LCD_Show_QS_ICO(void) {
1337   1      //      set_SEG2EN;
1338   1              LCDPTR = 2;
1339   1              LCDDAT |= COM0;
1340   1      }
1341          void LCD_Clear_COACH_ICO(void) {
1342   1      //      clr_SEG4EN;
1343   1              LCDPTR = 4;
1344   1              LCDDAT &= ~COM0;
1345   1      }
1346          void LCD_Show_COACH_ICO(void) {
1347   1      //      set_SEG4EN;
1348   1              LCDPTR = 4;
1349   1              LCDDAT = COM0;
1350   1      }
1351          void LCD_Clear_Line_down(void) {
1352   1      //      clr_SEG8EN;
1353   1              LCDPTR = 8;
1354   1              LCDDAT &= ~COM0;
1355   1      }
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 23  

1356          void LCD_Show_Line_down(void) {
1357   1      //      set_SEG8EN;
1358   1              LCDPTR = 8;
1359   1              LCDDAT |= COM0;
1360   1      }
1361          void LCD_Clear_Heart_ICO(void) {
1362   1      //      clr_SEG0EN;
1363   1              LCDPTR = 0;
1364   1              LCDDAT &= ~COM0;
1365   1      }
1366          void LCD_Show_Heart_ICO(void) {
1367   1      //      set_SEG0EN;
1368   1              LCDPTR = 0;
1369   1              LCDDAT |= COM0;
1370   1      }
1371          void LCD_Clear_CAL_Num(void) {
1372   1      
1373   1              LCDPTR = 0;
1374   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1375   1      //      LCDDAT = COM1 + COM2 + COM3;
1376   1      
1377   1              LCDPTR = 1;
1378   1              LCDDAT = 0;
1379   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1380   1      
1381   1              LCDPTR = 2;
1382   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1383   1      //      LCDDAT = COM1 + COM2 + COM3;
1384   1      
1385   1              LCDPTR = 3;
1386   1              LCDDAT = 0;
1387   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1388   1      
1389   1              LCDPTR = 4;
1390   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1391   1      //      LCDDAT = COM1 + COM2 + COM3;
1392   1      
1393   1              LCDPTR = 5;
1394   1              LCDDAT = 0;
1395   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1396   1      
1397   1              LCDPTR = 6;
1398   1              LCDDAT &= ~(COM1 + COM2 + COM3);
1399   1      //      LCDDAT = COM1 + COM2 + COM3;
1400   1      
1401   1              LCDPTR = 7;
1402   1              LCDDAT = 0;
1403   1      //      LCDDAT = COM0 + COM1 + COM2 + COM3;
1404   1      }
1405          void LCD_Show_CAL_Num(uint16_t num) {
1406   1              uint8_t ge;
1407   1              uint8_t shi;
1408   1              uint8_t bai;
1409   1              uint8_t qian;
1410   1      
1411   1              if (num > 9999) {
1412   2                      return;
1413   2              }
1414   1              qian = num / 1000;
1415   1              bai = num % 1000 / 100;
1416   1              shi = num % 100 / 10;
1417   1              ge = num % 10;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 24  

1418   1              if (num > 999) {
1419   2      //              set_SEG0EN;
1420   2      //              set_SEG1EN;
1421   2      
1422   2                      switch (qian) {
1423   3                      case 0:
1424   3                              LCDPTR = 0;
1425   3                              LCDDAT = COM1 + COM3;
1426   3      
1427   3                              LCDPTR = 1;
1428   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1429   3                              break;
1430   3                      case 1:
1431   3                              LCDPTR = 0;
1432   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1433   3      
1434   3                              LCDPTR = 1;
1435   3                              LCDDAT = COM1 + COM2;
1436   3                              break;
1437   3                      case 2:
1438   3                              LCDPTR = 0;
1439   3                              LCDDAT = COM2 + COM3;
1440   3      
1441   3                              LCDPTR = 1;
1442   3                              LCDDAT = COM0 + COM1 + COM3;
1443   3                              break;
1444   3                      case 3:
1445   3                              LCDPTR = 0;
1446   3                              LCDDAT = COM2;
1447   3      
1448   3                              LCDPTR = 1;
1449   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1450   3                              break;
1451   3                      case 4:
1452   3                              LCDPTR = 0;
1453   3                              LCDDAT = COM1 + COM2;
1454   3      
1455   3                              LCDPTR = 1;
1456   3                              LCDDAT = COM1 + COM2;
1457   3                              break;
1458   3                      case 5:
1459   3                              LCDPTR = 0;
1460   3                              LCDDAT = COM1 + COM2;
1461   3      
1462   3                              LCDPTR = 1;
1463   3                              LCDDAT = COM0 + COM2 + COM3;
1464   3                              break;
1465   3                      case 6:
1466   3                              LCDPTR = 0;
1467   3                              LCDDAT = COM1 + COM2 + COM3;
1468   3      
1469   3                              LCDPTR = 1;
1470   3                              LCDDAT = COM0 + COM2 + COM3;
1471   3                              break;
1472   3                      case 7:
1473   3                              LCDPTR = 0;
1474   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1475   3      
1476   3                              LCDPTR = 1;
1477   3                              LCDDAT = COM0 + COM1 + COM2;
1478   3                              break;
1479   3                      case 8:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 25  

1480   3                              LCDPTR = 0;
1481   3                              LCDDAT = COM1 + COM2 + COM3;
1482   3      
1483   3                              LCDPTR = 1;
1484   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1485   3                              break;
1486   3                      case 9:
1487   3                              LCDPTR = 0;
1488   3                              LCDDAT = COM1 + COM2;
1489   3      
1490   3                              LCDPTR = 1;
1491   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1492   3                              break;
1493   3                      }
1494   2              } else {
1495   2                      LCDPTR = 0;
1496   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1497   2      
1498   2                      LCDPTR = 1;
1499   2                      LCDDAT = 0;
1500   2              }
1501   1              if (num > 99) {
1502   2      
1503   2                      switch (bai) {
1504   3                      case 0:
1505   3                              LCDPTR = 2;
1506   3                              LCDDAT = COM1 + COM3;
1507   3      
1508   3                              LCDPTR = 3;
1509   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1510   3                              break;
1511   3                      case 1:
1512   3                              LCDPTR = 2;
1513   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1514   3      
1515   3                              LCDPTR = 3;
1516   3                              LCDDAT = COM1 + COM2;
1517   3                              break;
1518   3                      case 2:
1519   3                              LCDPTR = 2;
1520   3                              LCDDAT = COM2 + COM3;
1521   3      
1522   3                              LCDPTR = 3;
1523   3                              LCDDAT = COM0 + COM1 + COM3;
1524   3                              break;
1525   3                      case 3:
1526   3                              LCDPTR = 2;
1527   3                              LCDDAT = COM2;
1528   3      
1529   3                              LCDPTR = 3;
1530   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1531   3                              break;
1532   3                      case 4:
1533   3                              LCDPTR = 2;
1534   3                              LCDDAT = COM1 + COM2;
1535   3      
1536   3                              LCDPTR = 3;
1537   3                              LCDDAT = COM1 + COM2;
1538   3                              break;
1539   3                      case 5:
1540   3                              LCDPTR = 2;
1541   3                              LCDDAT = COM1 + COM2;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 26  

1542   3      
1543   3                              LCDPTR = 3;
1544   3                              LCDDAT = COM0 + COM2 + COM3;
1545   3                              break;
1546   3                      case 6:
1547   3                              LCDPTR = 2;
1548   3                              LCDDAT = COM1 + COM2 + COM3;
1549   3      
1550   3                              LCDPTR = 3;
1551   3                              LCDDAT = COM0 + COM2 + COM3;
1552   3                              break;
1553   3                      case 7:
1554   3                              LCDPTR = 2;
1555   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1556   3      
1557   3                              LCDPTR = 3;
1558   3                              LCDDAT = COM0 + COM1 + COM2;
1559   3                              break;
1560   3                      case 8:
1561   3                              LCDPTR = 2;
1562   3                              LCDDAT = COM1 + COM2 + COM3;
1563   3      
1564   3                              LCDPTR = 3;
1565   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1566   3                              break;
1567   3                      case 9:
1568   3                              LCDPTR = 2;
1569   3                              LCDDAT = COM1 + COM2;
1570   3      
1571   3                              LCDPTR = 3;
1572   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1573   3                              break;
1574   3                      }
1575   2              } else {
1576   2      //              clr_SEG2EN;
1577   2      //              clr_SEG3EN;
1578   2                      LCDPTR = 2;
1579   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1580   2      
1581   2                      LCDPTR = 3;
1582   2                      LCDDAT = 0;
1583   2              }
1584   1              if (num > 9) {
1585   2      //              set_SEG4EN;
1586   2      //              set_SEG5EN;
1587   2      
1588   2                      switch (shi) {
1589   3                      case 0:
1590   3                              LCDPTR = 4;
1591   3                              LCDDAT = COM1 + COM3;
1592   3      
1593   3                              LCDPTR = 5;
1594   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1595   3                              break;
1596   3                      case 1:
1597   3                              LCDPTR = 4;
1598   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1599   3      
1600   3                              LCDPTR = 5;
1601   3                              LCDDAT = COM1 + COM2;
1602   3                              break;
1603   3                      case 2:
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 27  

1604   3                              LCDPTR = 4;
1605   3                              LCDDAT = COM2 + COM3;
1606   3      
1607   3                              LCDPTR = 5;
1608   3                              LCDDAT = COM0 + COM1 + COM3;
1609   3                              break;
1610   3                      case 3:
1611   3                              LCDPTR = 4;
1612   3                              LCDDAT = COM2;
1613   3      
1614   3                              LCDPTR = 5;
1615   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1616   3                              break;
1617   3                      case 4:
1618   3                              LCDPTR = 4;
1619   3                              LCDDAT = COM1 + COM2;
1620   3      
1621   3                              LCDPTR = 5;
1622   3                              LCDDAT = COM1 + COM2;
1623   3                              break;
1624   3                      case 5:
1625   3                              LCDPTR = 4;
1626   3                              LCDDAT = COM1 + COM2;
1627   3      
1628   3                              LCDPTR = 5;
1629   3                              LCDDAT = COM0 + COM2 + COM3;
1630   3                              break;
1631   3                      case 6:
1632   3                              LCDPTR = 4;
1633   3                              LCDDAT = COM1 + COM2 + COM3;
1634   3      
1635   3                              LCDPTR = 5;
1636   3                              LCDDAT = COM0 + COM2 + COM3;
1637   3                              break;
1638   3                      case 7:
1639   3                              LCDPTR = 4;
1640   3                              LCDDAT &= ~(COM1 + COM2 + COM3);
1641   3      
1642   3                              LCDPTR = 5;
1643   3                              LCDDAT = COM0 + COM1 + COM2;
1644   3                              break;
1645   3                      case 8:
1646   3                              LCDPTR = 4;
1647   3                              LCDDAT = COM1 + COM2 + COM3;
1648   3      
1649   3                              LCDPTR = 5;
1650   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1651   3                              break;
1652   3                      case 9:
1653   3                              LCDPTR = 4;
1654   3                              LCDDAT = COM1 + COM2;
1655   3      
1656   3                              LCDPTR = 5;
1657   3                              LCDDAT = COM0 + COM1 + COM2 + COM3;
1658   3                              break;
1659   3                      }
1660   2              } else {
1661   2      //              clr_SEG4EN;
1662   2      //              clr_SEG5EN;
1663   2                      LCDPTR = 4;
1664   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1665   2      
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 28  

1666   2                      LCDPTR = 5;
1667   2                      LCDDAT = 0;
1668   2              }
1669   1      
1670   1      //      set_SEG6EN;
1671   1      //      set_SEG7EN;
1672   1              switch (ge) {
1673   2              case 0:
1674   2                      LCDPTR = 6;
1675   2                      LCDDAT = COM1 + COM3;
1676   2      
1677   2                      LCDPTR = 7;
1678   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1679   2                      break;
1680   2              case 1:
1681   2                      LCDPTR = 6;
1682   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1683   2      
1684   2                      LCDPTR = 7;
1685   2                      LCDDAT = COM1 + COM2;
1686   2                      break;
1687   2              case 2:
1688   2                      LCDPTR = 6;
1689   2                      LCDDAT = COM2 + COM3;
1690   2      
1691   2                      LCDPTR = 7;
1692   2                      LCDDAT = COM0 + COM1 + COM3;
1693   2                      break;
1694   2              case 3:
1695   2                      LCDPTR = 6;
1696   2                      LCDDAT = COM2;
1697   2      
1698   2                      LCDPTR = 7;
1699   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1700   2                      break;
1701   2              case 4:
1702   2                      LCDPTR = 6;
1703   2                      LCDDAT = COM1 + COM2;
1704   2      
1705   2                      LCDPTR = 7;
1706   2                      LCDDAT = COM1 + COM2;
1707   2                      break;
1708   2              case 5:
1709   2                      LCDPTR = 6;
1710   2                      LCDDAT = COM1 + COM2;
1711   2      
1712   2                      LCDPTR = 7;
1713   2                      LCDDAT = COM0 + COM2 + COM3;
1714   2                      break;
1715   2              case 6:
1716   2                      LCDPTR = 6;
1717   2                      LCDDAT = COM1 + COM2 + COM3;
1718   2      
1719   2                      LCDPTR = 7;
1720   2                      LCDDAT = COM0 + COM2 + COM3;
1721   2                      break;
1722   2              case 7:
1723   2                      LCDPTR = 6;
1724   2                      LCDDAT &= ~(COM1 + COM2 + COM3);
1725   2      
1726   2                      LCDPTR = 7;
1727   2                      LCDDAT = COM0 + COM1 + COM2;
C51 COMPILER V9.56.0.0   BSP_DISPLAY                                                       08/11/2017 22:59:23 PAGE 29  

1728   2                      break;
1729   2              case 8:
1730   2                      LCDPTR = 6;
1731   2                      LCDDAT = COM1 + COM2 + COM3;
1732   2      
1733   2                      LCDPTR = 7;
1734   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1735   2                      break;
1736   2              case 9:
1737   2                      LCDPTR = 6;
1738   2                      LCDDAT = COM1 + COM2;
1739   2      
1740   2                      LCDPTR = 7;
1741   2                      LCDDAT = COM0 + COM1 + COM2 + COM3;
1742   2                      break;
1743   2              }
1744   1      }
1745          void LCD_Clear_CAL_ICO(void) {
1746   1      //      clr_SEG6EN;
1747   1              LCDPTR = 6;
1748   1              LCDDAT &= ~ COM0;
1749   1      }
1750          void LCD_Show_CAL_ICO(void) {
1751   1      //      set_SEG6EN;
1752   1              LCDPTR = 6;
1753   1              LCDDAT |= COM0;
1754   1      }
1755          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   3630    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       7
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
